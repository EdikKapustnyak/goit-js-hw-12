{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst MY_KEY = '49320414-34c235123b434a4e0d748057d';\n\nexport function getRequest(request, page = 1, perPage = 15) {\n    return axios.get('https://pixabay.com/api/', {\n        params: { \n            key: MY_KEY,\n            q: request,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: perPage,\n        }\n    });\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\n\nexport function renderGallery(images) {\n    gallery.innerHTML = '';\n\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"240\" />\n            </a>\n            <div class=\"description-container\">\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Likes</p>\n                    <span>${image.likes}</span>\n                </div>\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Views</p>\n                    <span>${image.views}</span>\n                </div>\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Comments</p>\n                    <span>${image.comments}</span>\n                </div>\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Downloads</p>\n                    <span>${image.downloads}</span>\n                </div>\n            </div>\n        </li>`\n    ).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getRequest } from \"./js/pixabay-api\";\nimport { renderGallery } from \"./js/render-function\";\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nloadMoreBtn.classList.add('visually-hidden');\n\nform.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleFormSubmit(event) { \n    event.preventDefault();\n    \n    const getInputValue = document.querySelector('input[name=\"search-text\"]').value.trim();\n\n    if (getInputValue === '') { \n        iziToast.show({\n            title: 'Error',\n            message: 'Please enter a search query!'\n        });\n        return;\n    }\n\n    currentQuery = getInputValue;\n    currentPage = 1;\n    gallery.innerHTML = ''; \n    loadMoreBtn.classList.add('visually-hidden');\n    loader.classList.remove('visually-hidden');\n\n    try {\n        const response = await getRequest(currentQuery, currentPage);\n        totalHits = response.data.totalHits;\n\n        if (response.data.hits.length === 0) { \n            iziToast.show({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n        } else {\n            renderGallery(response.data.hits);\n\n            if (response.data.hits.length < totalHits) {\n                loadMoreBtn.classList.remove('visually-hidden');\n            }\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.show({\n            title: 'Error',\n            message: 'Sorry, there was an error processing your request. Please try again!'\n        });\n    } finally {\n        loader.classList.add('visually-hidden');\n    }\n}\n\nasync function handleLoadMore() {\n    currentPage += 1; \n    loader.classList.remove('visually-hidden');\n\n    try {\n        const response = await getRequest(currentQuery, currentPage);\n        renderGallery(response.data.hits);\n\n        const totalLoadedImages = currentPage * 15; \n        if (totalLoadedImages >= totalHits) {\n            loadMoreBtn.classList.add('visually-hidden');\n            iziToast.show({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.show({\n            title: 'Error',\n            message: 'Sorry, there was an error processing your request. Please try again!'\n        });\n    } finally {\n        loader.classList.add('visually-hidden');\n    }\n}"],"names":["MY_KEY","getRequest","request","page","perPage","axios","gallery","renderGallery","images","markup","image","SimpleLightbox","form","loader","loadMoreBtn","currentPage","currentQuery","totalHits","handleFormSubmit","handleLoadMore","event","getInputValue","iziToast","response","error"],"mappings":"+vBAEA,MAAMA,EAAS,qCAER,SAASC,EAAWC,EAASC,EAAO,EAAGC,EAAU,GAAI,CACxD,OAAOC,EAAM,IAAI,2BAA4B,CACzC,OAAQ,CACJ,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACtB,CACA,CAAK,CACL,CCbA,MAAME,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAcC,EAAQ,CAClCF,EAAQ,UAAY,GAEpB,MAAMG,EAASD,EAAO,IAAIE,GAAS;AAAA;AAAA,4CAEKA,EAAM,aAAa;AAAA,4BACnCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4BAKtCA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,4BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,4BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,4BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,cAI3C,EAAM,KAAK,EAAE,EAETJ,EAAQ,mBAAmB,YAAaG,CAAM,EAE7B,IAAIE,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GACtB,CAAK,EACQ,QAAS,CACtB,CCpCA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACjDR,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIS,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBH,EAAY,UAAU,IAAI,iBAAiB,EAE3CF,EAAK,iBAAiB,SAAUM,CAAgB,EAChDJ,EAAY,iBAAiB,QAASK,CAAc,EAEpD,eAAeD,EAAiBE,EAAO,CACnCA,EAAM,eAAgB,EAEtB,MAAMC,EAAgB,SAAS,cAAc,2BAA2B,EAAE,MAAM,KAAM,EAEtF,GAAIA,IAAkB,GAAI,CACtBC,EAAS,KAAK,CACV,MAAO,QACP,QAAS,8BACrB,CAAS,EACD,MACR,CAEIN,EAAeK,EACfN,EAAc,EACdT,EAAQ,UAAY,GACpBQ,EAAY,UAAU,IAAI,iBAAiB,EAC3CD,EAAO,UAAU,OAAO,iBAAiB,EAEzC,GAAI,CACA,MAAMU,EAAW,MAAMtB,EAAWe,EAAcD,CAAW,EAC3DE,EAAYM,EAAS,KAAK,UAEtBA,EAAS,KAAK,KAAK,SAAW,EAC9BD,EAAS,KAAK,CACV,MAAO,QACP,QAAS,0EACzB,CAAa,GAEDf,EAAcgB,EAAS,KAAK,IAAI,EAE5BA,EAAS,KAAK,KAAK,OAASN,GAC5BH,EAAY,UAAU,OAAO,iBAAiB,EAGzD,OAAQU,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBF,EAAS,KAAK,CACV,MAAO,QACP,QAAS,sEACrB,CAAS,CACT,QAAc,CACNT,EAAO,UAAU,IAAI,iBAAiB,CAC9C,CACA,CAEA,eAAeM,GAAiB,CAC5BJ,GAAe,EACfF,EAAO,UAAU,OAAO,iBAAiB,EAEzC,GAAI,CACA,MAAMU,EAAW,MAAMtB,EAAWe,EAAcD,CAAW,EAC3DR,EAAcgB,EAAS,KAAK,IAAI,EAENR,EAAc,IACfE,IACrBH,EAAY,UAAU,IAAI,iBAAiB,EAC3CQ,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAa,EAER,OAAQE,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBF,EAAS,KAAK,CACV,MAAO,QACP,QAAS,sEACrB,CAAS,CACT,QAAc,CACNT,EAAO,UAAU,IAAI,iBAAiB,CAC9C,CACA"}